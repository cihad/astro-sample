---
import { parse } from "@astrojs/compiler";
import { readFileSync } from "node:fs";
import path from "node:path";
import url from "node:url";

const __dirname = path.dirname(url.fileURLToPath(import.meta.url));

const fileContent = readFileSync(path.resolve(__dirname, "./index.astro"), {
  encoding: "utf-8",
});

const result = await parse(fileContent);
---

<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
  crossorigin="anonymous"
/>

<div class="container">
  <div class="row">
    <div class="col">
      <pre>
        {JSON.stringify(result.ast, null, 2)}
      </pre>
    </div>

    <div class="col">
      <iframe src="/"></iframe>
    </div>
  </div>
</div>

<style>
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }
  * {
    margin: 0;
  }
  body {
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
  }
  img,
  picture,
  video,
  canvas,
  svg {
    display: block;
    max-width: 100%;
  }
  input,
  button,
  textarea,
  select {
    font: inherit;
  }
  p,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    overflow-wrap: break-word;
  }

  html,
  body {
    margin: 0;
    padding: 0;
    height: 100%;
  }

  iframe {
    width: 100%;
    height: 100%;
  }

  pre {
    overflow: scroll;
  }
</style>
